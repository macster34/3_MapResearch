import json

def check_vulnerability():
    with open('super-neighborhoods-vulnerability-index.geojson', 'r') as f:
        data = json.load(f)
    
    neighborhoods = []
    for feature in data['features']:
        props = feature['properties']
        neighborhoods.append({
            'name': props['neighborhood_name'],
            'vulnerability': props['vulnerability_index'],
            'calls': props['call_count'],
            'income': props['avg_median_income'],
            'flood': props['flood_percentage'],
            'church_count': props['church_count'],
            'church_area': props['total_church_area']
        })
    
    # Sort by vulnerability (lowest first)
    neighborhoods.sort(key=lambda x: x['vulnerability'])
    
    print("LEAST VULNERABLE (Top 5):")
    for i, n in enumerate(neighborhoods[:5]):
        print(f"  {i+1}. {n['name']}: {n['vulnerability']:.3f}")
        print(f"     Calls: {n['calls']}, Income: ${n['income']:,.0f}, Flood: {n['flood']:.1f}%")
        print(f"     Churches: {n['church_count']} ({n['church_area']:,.0f} sq ft)")
        print()
    
    print("MOST VULNERABLE (Bottom 5):")
    for i, n in enumerate(neighborhoods[-5:]):
        print(f"  {len(neighborhoods)-4+i}. {n['name']}: {n['vulnerability']:.3f}")
        print(f"     Calls: {n['calls']}, Income: ${n['income']:,.0f}, Flood: {n['flood']:.1f}%")
        print(f"     Churches: {n['church_count']} ({n['church_area']:,.0f} sq ft)")
        print()

if __name__ == "__main__":
    check_vulnerability() 