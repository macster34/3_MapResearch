const fs = require('fs');
const proj4 = require('proj4');

const inputPath = './public/houston-community-centers-vulnerability.geojson';
const outputPath = './public/houston-community-centers-vulnerability-4326.geojson';

// Define projections
const from = 'EPSG:3857';
const to = 'EPSG:4326';

const geojson = JSON.parse(fs.readFileSync(inputPath, 'utf8'));

geojson.features.forEach(f => {
  if (f.geometry.type === 'Point') {
    f.geometry.coordinates = proj4(from, to, f.geometry.coordinates);
  }
  // If you have other geometry types, handle them here
});

delete geojson.crs; // Remove the CRS property for Mapbox compatibility

fs.writeFileSync(outputPath, JSON.stringify(geojson, null, 2));
console.log('Wrote reprojected GeoJSON to', outputPath); 